<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Groupie Trackers</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
      <!-- Header section for title and search bar -->
    <header class="header">
        <a class="h1" href="/">Groupie Tracker</a>
        <div class="search-bar-container">
            <input 
                type="text" 
                class="search-bar" 
                id="search-bar" 
                placeholder="Search for an artist, member, or location..."
                oninput="performSearch()"
            >
            <ul id="suggestions" class="suggestions hidden"></ul>
        </div>
    </header>

    <div class="artist-list">
        {{range .}}
            <div class="artist-card">
            
                    <img src="{{.Image}}" alt="{{.Name}}" class="artist-images">
                    <div class="artist-name">
                        <a href="/artist?id={{.ID}}" >{{.Name}}</a>
                    </div>
                </a>
            </div>
        {{end}}
    </div>
    <script>

async function performSearch() {
    const query = document.getElementById('search-bar').value.trim();
    const suggestionsList = document.getElementById('suggestions-list');

    if (!query) {
        suggestionsList.classList.add('hidden');
        return;
    }

    try {
        const response = await fetch(`/search?q=${encodeURIComponent(query)}`);
        const suggestions = await response.json();

        // Clear previous suggestions
        suggestionsList.innerHTML = '';

        if (suggestions.length === 0) {
            suggestionsList.classList.add('hidden');
            return;
        }

        // Display new suggestions
        suggestions.forEach(suggestion => {
            const listItem = document.createElement('li');
            listItem.textContent = `${suggestion.Name} - ${suggestion.Type}`;
            suggestionsList.appendChild(listItem);
        });

        suggestionsList.classList.remove('hidden');
    } catch (error) {
        console.error("Error fetching suggestions:", error);
    }
}
    </script>
 </body>
</html>
